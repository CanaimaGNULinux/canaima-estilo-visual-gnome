#!/bin/bash -e
#
# ==============================================================================
# PAQUETE: canaima-estilo-visual
# ARCHIVO: postinst
# DESCRIPCIÓN: Configura el sistema despues la instalación del paquete.
# COPYRIGHT:
#  (C) 2010 Luis Alejandro Martínez Faneyth <martinez.faneyth@gmail.com>
#  (C) 2010 Diego Alberto Aguilera Zambrano <daguilera85@gmail.com>
#  (C) 2010 Carlos Alejandro Guerrero Mora <guerrerocarlos@gmail.com>
#  (C) 2010 Francisco Javier Vásquez Guerrero <franjvasquezg@gmail.com>
# LICENCIA: GPL3
# ==============================================================================
#
# Este programa es software libre. Puede redistribuirlo y/o modificarlo bajo los
# términos de la Licencia Pública General de GNU (versión 3).

PKG="canaima-estilo-visual"

case ${1} in

	configure)

	if [ -x /usr/share/update-notifier/notify-reboot-required ]
	then

	        /usr/share/update-notifier/notify-reboot-required

	fi

	if [ -e /usr/sbin/update-grub ]
	then

		mv /usr/sbin/update-grub /usr/sbin/update-grub.backup
		ln -s /usr/sbin/update-burg /usr/sbin/update-grub

	fi

	if [ -e /usr/sbin/update-grub2 ]
	then

		mv /usr/sbin/update-grub2 /usr/sbin/update-grub2.backup
		ln -s /usr/sbin/update-burg /usr/sbin/update-grub2

	fi

	if [ $( cat /etc/kernel-img.conf | grep "postinst_hook = update-burg" | wc -l ) == 0 ]
	then

		echo "postinst_hook = update-burg" >> /etc/kernel-img.conf
		echo "postrm_hook = update-burg" >> /etc/kernel-img.conf

	fi

	if [ -e /etc/default/burg ]
        then

		sed -i 's/GRUB_GFXMODE=.*/GRUB_GFXMODE=1024x768/g' /etc/default/burg
		sed -i 's/GRUB_THEME=.*/GRUB_THEME=radiance/g' /etc/default/burg
		sed -i 's/GRUB_TIMEOUT=.*/GRUB_TIMEOUT=3/g' /etc/default/burg

        fi

	if [ -x $( which update-burg ) ]; then
		update-burg
	fi

	;;

        abort-upgrade|abort-remove|abort-deconfigure)
        ;;

        *)

                echo "postinst no reconoce el argumento '"${1}"'" >&2
                exit 1

        ;;

esac

#DEBHELPER#

exit 0
